import Vue from 'vue';
import ShopeeCheckbox from '../index';
import { createInstance, destroyInstance, createElement } from '@/test/utils';

Vue.use(ShopeeCheckbox);

describe('checkbox.vue', () => {
  let vm;
  afterEach(() => {
    destroyInstance(vm);
  });

  const createCheckbox = propsData => {
    return createInstance(ShopeeCheckbox, propsData);
  };

  it('should render correct type', () => {
    vm = createCheckbox({
      type: 'outline'
    });
    expect(vm.$el.classList.contains('shopee-checkbox--outline')).to.be.true;
  });

  it('should render correct when disabled', () => {
    vm = createCheckbox({
      disabled: true
    });
    expect(vm.$el.classList.contains('disabled')).to.be.true;
  });

  it('should change the value when clicked', done => {
    vm = new Vue({
      template: '<shopee-checkbox v-model="value">checkbox</shopee-checkbox>',
      data() {
        return {
          value: false
        };
      }
    }).$mount(createElement());
    vm.$el.click();
    setTimeout(() => {
      expect(vm.value).to.be.true;
      done();
    }, 200);
  });
});
