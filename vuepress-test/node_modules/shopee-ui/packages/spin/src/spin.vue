<template>
  <transition name="fade-slow">
    <div class="shopee-spin" :class="className">
      <div class="shopee-spin-content" :class="contentClassName">
        <shopee-icon class="shopee-spin-content-icon" spin :svg="loadingIcon" :class="iconClassName"></shopee-icon>
        <div class="shopee-spin-content-tips" v-if="!!tips && !$slots.default">{{tips}}</div>
        <slot></slot>
      </div>
    </div>
  </transition>
</template>
<script>
import { Icon as ShopeeIcon } from 'shopee-ui/lib/icon';
import loadingIcon from '@shopee-ui/icon/svg/loading.svg';

export default {
  name: 'ShopeeSpin',
  components: {
    ShopeeIcon
  },
  props: {
    color: {
      type: String,
      default: 'orange',
      validator(color = 'orange') {
        return ['orange', 'white', 'grey'].indexOf(color) >= 0;
      }
    },
    size: {
      type: String,
      default: 'normal',
      validator(size = 'normal') {
        return ['normal','small'].indexOf(size) >= 0;
      }
    },
    fix: {
      type: Boolean,
      default: false
    },
    mask: {
      type: Boolean,
      default: false
    },
    tips: String
  },
  data() {
    return {
      loadingIcon,
    };
  },
  computed: {
    className() {
      return [
        this.fix && this.mask ? 'shopee-spin__fix' : ''
      ];
    },
    contentClassName() {
      return [
        this.fix ? 'shopee-spin-content__fix' : '',
        this.color
      ];
    },
    iconClassName() {
      return [
        this.size ? `shopee-spin-icon__${this.size}` : 'shopee-spin-icon__normal'
      ];
    }
  }
};
</script>
