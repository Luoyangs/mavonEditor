import Vue from 'vue';
import ShopeeSteps from '../index';
import { createElement, destroyInstance } from '@/test/utils';
import shopIcon from '@shopee-ui/icon/svg/shop.svg';
import walletIcon from '@shopee-ui/icon/svg/wallet.svg';
import shippingIcon from '@shopee-ui/icon/svg/shipping.svg';
import approvedIcon from '@shopee-ui/icon/svg/success.svg';

Vue.use(ShopeeSteps);

describe('steps.vue', () => {
  let vm;
  afterEach(() => {
    destroyInstance(vm);
  });

  it('should render correct', () => {
    vm = new Vue({
      template: `<shopee-steps>
        <shopee-step title="Step1"></shopee-step>
        <shopee-step title="Step2"></shopee-step>
        <shopee-step title="Step3"></shopee-step>
      </shopee-steps>`
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-steps')).to.be.true;
    expect(vm.$el.querySelectorAll('.shopee-step').length).to.equal(3);
  });

  it('should render correct: vertical label', () => {
    vm = new Vue({
      template: `<shopee-steps label-placement="vertical">
        <shopee-step title="Edit Name of Webchat in ShenZhen"></shopee-step>
        <shopee-step title="Add Members in ShenZhen"></shopee-step>
        <shopee-step title="Check Source"></shopee-step>
      </shopee-steps>`
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-steps-label-vertical')).to.be.true;
  });

  it('should render correct: progress dot', () => {
    vm = new Vue({
      template: `<shopee-steps progress-dot>
        <shopee-step title="Edit Name"></shopee-step>
        <shopee-step title="Add Members"></shopee-step>
        <shopee-step title="Check Source"></shopee-step>
        <shopee-step title="Finish"></shopee-step>
      </shopee-steps>`
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-steps-dot')).to.be.true;
    expect(vm.$el.classList.contains('shopee-steps-label-vertical')).to.be.true;
  });

  it('should render correct: with icon', () => {
    vm = new Vue({
      template: `<shopee-steps progress-dot>
        <shopee-step title="Edit Name" :icon="shopIcon"></shopee-step>
        <shopee-step title="Add Members" :icon="walletIcon"></shopee-step>
        <shopee-step title="Check Source" :icon="shippingIcon"></shopee-step>
        <shopee-step title="Finish" :icon="approvedIcon"></shopee-step>
      </shopee-steps>`,
      data: {
        shopIcon,
        walletIcon,
        shippingIcon,
        approvedIcon
      }
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-steps-dot')).to.be.true;
    expect(vm.$el.querySelectorAll('.shopee-icon').length).to.equal(4);
  });
});
