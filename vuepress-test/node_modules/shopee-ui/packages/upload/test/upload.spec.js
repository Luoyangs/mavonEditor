import Vue from 'vue';
import ShopeeUpload from '../index';
import { createElement, destroyInstance } from '@/test/utils';

Vue.use(ShopeeUpload);

describe('upload.vue', () => {
  let vm;
  afterEach(() => {
    destroyInstance(vm);
  });

  it('should render correct: basic', () => {
    vm = new Vue({
      template: `<shopee-upload action="//jsonplaceholder.typicode.com/posts/">
        Upload
      </shopee-upload>`
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-upload')).to.be.true;
    expect(vm.$el.querySelector('.shopee-upload__input').type).to.equal('file');
  });

  it('should render correct: drag', () => {
    vm = new Vue({
      template: `<shopee-upload drag action="//jsonplaceholder.typicode.com/posts/">
        <div class="shopee-upload__text">Click or drag files here to upload</div>
      </shopee-upload>`
    }).$mount(createElement());
    expect(vm.$el.classList.contains('shopee-upload')).to.be.true;
    expect(vm.$el.querySelector('.shopee-upload__input').type).to.equal('file');
    expect(vm.$el.querySelector('.shopee-upload-wrapper').classList.contains('shopee-upload-dragger')).to.be.true;
  });
});
