<template>
  <div :class="prefixClass">
    <shopee-icon :svg="doubleArrowLeftIcon"
      :class="[prefixClass + '__icon', prefixClass + '__prev', this.hidePrevYear ? 'disabled' : '']"
      @click.native="onPrevClick('year')"></shopee-icon>
    <shopee-icon :svg="arrowLeftIcon"
      v-show="view === 'date'"
      :class="[prefixClass + '__icon', prefixClass + '__prev', this.hidePrevMonth ? 'disabled' : '']"
      @click.native="onPrevClick('month')"></shopee-icon>
    <span :class="[prefixClass + '__label', 'clickable']"
      @click="onLabelClick('month')"
      v-show="view === 'date'">{{monthLabel}}</span>
    <span :class="[prefixClass + '__label', 'clickable']"
      @click="onLabelClick('year')"
      v-show="view === 'date' || view === 'month'">{{year}}</span>
    <span :class="[prefixClass + '__label']"
      v-show="view === 'year'">{{yearRange.start + ' â€“ ' + yearRange.end}}</span>
    <shopee-icon :svg="arrowRightIcon"
      v-show="view === 'date'"
      :class="[prefixClass + '__icon', prefixClass + '__next', this.hideNextMonth ? 'disabled' : '']"
      @click.native="onNextClick('month')"></shopee-icon>
    <shopee-icon :svg="doubleArrowRightIcon"
      :class="[prefixClass + '__icon', prefixClass + '__next', this.hideNextYear ? 'disabled' : '']"
      @click.native="onNextClick('year')"></shopee-icon>
  </div>
</template>
<script>
import { Icon as ShopeeIcon } from 'shopee-ui/lib/icon';
import { LocaleMixin } from 'shopee-ui/lib/base';
import { MONTHS } from '../utils/util';
import arrowLeftIcon from '@shopee-ui/icon/svg/arrow-left.svg';
import arrowRightIcon from '@shopee-ui/icon/svg/arrow-right.svg';
import doubleArrowLeftIcon from '@shopee-ui/icon/svg/double-arrow-left.svg';
import doubleArrowRightIcon from '@shopee-ui/icon/svg/double-arrow-right.svg';

export default {
  name: 'ShopeeDatePickerHeader',
  components: {
    ShopeeIcon
  },
  mixins: [LocaleMixin],
  props: {
    view: String,
    year: {
      type: Number,
      default() {
        return new Date().getFullYear();
      }
    },
    month: {
      type: Number,
      default() {
        return new Date().getMonth();
      }
    },
    yearRange: {},
    hidePrevMonth: Boolean,
    hideNextMonth: Boolean,
    hidePrevYear: Boolean,
    hideNextYear: Boolean,
  },
  data() {
    return {
      arrowLeftIcon,
      arrowRightIcon,
      doubleArrowLeftIcon,
      doubleArrowRightIcon,
      prefixClass: 'shopee-picker-header'
    };
  },
  computed: {
    monthLabel() {
      return this.t(`shopee-ui.date-picker.months.normal.${MONTHS[this.month]}`);
    }
  },
  methods: {
    onLabelClick(type) {
      this.$emit(`${type}-click`);
    },
    onNextClick(type) {
      if (type === 'month' && this.hideNextMonth || type === 'year' && this.hideNextYear) {
        return;
      }
      this.$emit('next', type);
    },
    onPrevClick(type) {
      if (type === 'month' && this.hidePrevMonth || type === 'year' && this.hidePrevYear) {
        return;
      }
      this.$emit('prev', type);
    }
  }
};
</script>

