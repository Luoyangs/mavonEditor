import Vue from 'vue';
import ShopeeBadge from '../index';
import { createInstance, destroyInstance } from '@/test/utils';

Vue.use(ShopeeBadge);

/**
 * create shopee-badge instance
 * @param  {Object} propsData the propsData pass to badge
 * @return {Object} the badge instance
 */
const createBadge = propsData => {
  return createInstance(ShopeeBadge, propsData);
};

describe('badge.vue', () => {
  let vm;
  afterEach(() => {
    destroyInstance(vm);
  });

  it('should render correct', () => {
    vm = createBadge();

    expect(vm.$el.querySelector('.shopee-badge-x__sup')).to.exist;
    expect(vm.$el.querySelector('.shopee-badge-x__sup--dot')).to.exist;
  });

  it('should render type', () => {
    vm = createBadge({
      type: 'new'
    });

    expect(vm.$el.querySelector('.shopee-badge-x__sup--new')).to.exist;
  });

  it('should render value', () => {
    vm = createBadge({
      value: 23
    });

    expect(vm.$el.querySelector('.shopee-badge-x__sup--num').innerHTML).to.equals('23');
  });

  it('should render max', () => {
    vm = createBadge({
      value: 89,
      max: 50
    });

    expect(vm.$el.querySelector('.shopee-badge-x__sup--num').innerHTML).to.equals('50+');
  });

  it('should render hidden', () => {
    vm = createBadge({
      hidden: true
    });

    expect(vm.$el.querySelector('.shopee-badge-x__sup').style.display).to.equals('none');
  });
});
