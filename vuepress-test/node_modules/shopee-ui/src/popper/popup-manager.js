import Vue from 'vue';

// cannot more than 9999999 reserved for toast
let modalZIndex = 1000000;
let zIndex = 10000;

const PopupManager = {
  nextZIndex(isInModal = false) {
    if (isInModal) {
      return PopupManager.modalZIndex++;
    } else {
      return PopupManager.zIndex++;
    }
  }
};

Object.defineProperty(PopupManager, 'zIndex', {
  configurable: true,
  get() {
    if (!Vue.$SHOPEE) {
      Vue.$SHOPEE = {};
    }
    return Vue.$SHOPEE.zIndex || zIndex;
  },
  set(value) {
    Vue.$SHOPEE.zIndex = value;
  }
});

Object.defineProperty(PopupManager, 'modalZIndex', {
  configurable: true,
  get() {
    if (!Vue.$SHOPEE) {
      Vue.$SHOPEE = {};
    }
    return Vue.$SHOPEE.modalZIndex || modalZIndex;
  },
  set(value) {
    Vue.$SHOPEE.modalZIndex = value;
  }
});

export default PopupManager;
