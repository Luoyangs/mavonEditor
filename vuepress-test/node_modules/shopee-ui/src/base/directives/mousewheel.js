import normalizeWheel from 'normalize-wheel';

const mousewheelEvent = typeof navigator !== 'undefined' && navigator.userAgent.toLowerCase().indexOf('firefox') > -1 ? 'DOMMouseScroll' : 'mousewheel';

let handleMousewheel = function(callback) {
  return function(event) {
    callback && callback.apply(this, [event, normalizeWheel(event)]);
  };
};

export default {
  bind(el, binding) {
    const mousewheelListener = handleMousewheel(binding.value);
    el._mousewheelListener = mousewheelListener;
    el.addEventListener(mousewheelEvent, mousewheelListener);
  },
  unbind(el) {
    if (el._mousewheelListener) {
      el.removeEventListener(mousewheelEvent, el._mousewheelListener);
    }
  },
};
